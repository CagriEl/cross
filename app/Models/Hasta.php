<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Hasta extends Model
{
    use HasFactory;

    protected $fillable = ['ad', 'soyad', 'kan_grubu', 'hastane_id', 'aciliyet_derecesi'];

    // üü¢ Hastanƒ±n kan grubuna g√∂re uygun don√∂rleri getir
    public function uygunDonorler()
    {
        return $this->hasMany(Donor::class, 'kan_grubu', 'kan_grubu')
                    ->whereDate('son_kullanma_tarihi', '>=', now()); // Son kullanma tarihi ge√ßmemi≈ü don√∂rleri getir
    }
}
